{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\laxmi\\\\Desktop\\\\tenant\\\\frontend\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Login from './components/Login';\nimport NotesList from './components/NotesList';\nimport NoteForm from './components/NoteForm';\nimport UpgradeBanner from './components/UpgradeBanner';\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API = process.env.REACT_APP_API_URL || 'http://localhost:3001';\nfunction App() {\n  _s();\n  const [token, setToken] = useState('');\n  const [role, setRole] = useState('');\n  const [tenant, setTenant] = useState('');\n  const [notes, setNotes] = useState([]);\n  const [title, setTitle] = useState('');\n  const [content, setContent] = useState('');\n  const [error, setError] = useState('');\n  const [limitReached, setLimitReached] = useState(false);\n  const login = async e => {\n    e.preventDefault();\n    const email = e.target.email.value;\n    const password = e.target.password.value;\n    try {\n      const res = await axios.post(`${API}/login`, {\n        email,\n        password\n      });\n      setToken(res.data.token);\n      setRole(res.data.role);\n      setTenant(res.data.tenant);\n      setError('');\n    } catch (err) {\n      setError('Login failed');\n    }\n  };\n  const fetchNotes = async () => {\n    if (!token) return;\n    try {\n      const res = await axios.get(`${API}/notes`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setNotes(res.data);\n      setLimitReached(res.data.length >= 3 && role === 'member');\n    } catch (err) {\n      setError('Failed to fetch notes');\n    }\n  };\n  useEffect(() => {\n    fetchNotes();\n    // eslint-disable-next-line\n  }, [token]);\n  const createNote = async e => {\n    e.preventDefault();\n    try {\n      await axios.post(`${API}/notes`, {\n        title,\n        content\n      }, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setTitle('');\n      setContent('');\n      fetchNotes();\n      setError('');\n    } catch (err) {\n      var _err$response, _err$response$data, _err$response2, _err$response2$data, _err$response2$data$e;\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || 'Failed to create note');\n      if ((_err$response2 = err.response) !== null && _err$response2 !== void 0 && (_err$response2$data = _err$response2.data) !== null && _err$response2$data !== void 0 && (_err$response2$data$e = _err$response2$data.error) !== null && _err$response2$data$e !== void 0 && _err$response2$data$e.includes('Note limit')) setLimitReached(true);\n    }\n  };\n  const deleteNote = async id => {\n    try {\n      await axios.delete(`${API}/notes/${id}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      fetchNotes();\n      setError('');\n    } catch (err) {\n      setError('Failed to delete note');\n    }\n  };\n  const upgrade = async () => {\n    try {\n      await axios.post(`${API}/tenants/${tenant}/upgrade`, {}, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setLimitReached(false);\n      fetchNotes();\n      setError('');\n    } catch (err) {\n      setError('Upgrade failed');\n    }\n  };\n\n  // Edit note handler\n  const editNote = async (id, newTitle, newContent) => {\n    try {\n      await axios.put(`${API}/notes/${id}`, {\n        title: newTitle,\n        content: newContent\n      }, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      fetchNotes();\n      setError('');\n    } catch (err) {\n      setError('Failed to edit note');\n    }\n  };\n\n  // Show upgrade banner for both admin and member when limit reached, but only admin sees button\n  const showUpgradeBanner = limitReached && (role === 'admin' || role === 'member');\n  if (!token) {\n    return /*#__PURE__*/_jsxDEV(Login, {\n      onLogin: login,\n      error: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [\"Notes (\", tenant, \")\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(NoteForm, {\n      title: title,\n      setTitle: setTitle,\n      content: content,\n      setContent: setContent,\n      onCreate: createNote,\n      disabled: limitReached\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this), showUpgradeBanner && /*#__PURE__*/_jsxDEV(UpgradeBanner, {\n      limitReached: limitReached,\n      role: role,\n      onUpgrade: upgrade\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 29\n    }, this), /*#__PURE__*/_jsxDEV(NotesList, {\n      notes: notes,\n      onDelete: deleteNote,\n      onEdit: editNote\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"logout-btn\",\n      onClick: () => setToken(''),\n      children: \"Logout\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 116,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"LvAyp4DQVku6ceVvzPNtUfeXaAA=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","axios","Login","NotesList","NoteForm","UpgradeBanner","jsxDEV","_jsxDEV","API","process","env","REACT_APP_API_URL","App","_s","token","setToken","role","setRole","tenant","setTenant","notes","setNotes","title","setTitle","content","setContent","error","setError","limitReached","setLimitReached","login","e","preventDefault","email","target","value","password","res","post","data","err","fetchNotes","get","headers","Authorization","length","createNote","_err$response","_err$response$data","_err$response2","_err$response2$data","_err$response2$data$e","response","includes","deleteNote","id","delete","upgrade","editNote","newTitle","newContent","put","showUpgradeBanner","onLogin","fileName","_jsxFileName","lineNumber","columnNumber","className","children","onCreate","disabled","onUpgrade","onDelete","onEdit","onClick","_c","$RefreshReg$"],"sources":["C:/Users/laxmi/Desktop/tenant/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport Login from './components/Login';\r\nimport NotesList from './components/NotesList';\r\nimport NoteForm from './components/NoteForm';\r\nimport UpgradeBanner from './components/UpgradeBanner';\r\nimport './App.css';\r\n\r\nconst API = process.env.REACT_APP_API_URL || 'http://localhost:3001';\r\n\r\nfunction App() {\r\n  const [token, setToken] = useState('');\r\n  const [role, setRole] = useState('');\r\n  const [tenant, setTenant] = useState('');\r\n  const [notes, setNotes] = useState([]);\r\n  const [title, setTitle] = useState('');\r\n  const [content, setContent] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [limitReached, setLimitReached] = useState(false);\r\n\r\n  const login = async (e) => {\r\n    e.preventDefault();\r\n    const email = e.target.email.value;\r\n    const password = e.target.password.value;\r\n    try {\r\n      const res = await axios.post(`${API}/login`, { email, password });\r\n      setToken(res.data.token);\r\n      setRole(res.data.role);\r\n      setTenant(res.data.tenant);\r\n      setError('');\r\n    } catch (err) {\r\n      setError('Login failed');\r\n    }\r\n  };\r\n\r\n  const fetchNotes = async () => {\r\n    if (!token) return;\r\n    try {\r\n      const res = await axios.get(`${API}/notes`, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      setNotes(res.data);\r\n      setLimitReached(res.data.length >= 3 && role === 'member');\r\n    } catch (err) {\r\n      setError('Failed to fetch notes');\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchNotes();\r\n    // eslint-disable-next-line\r\n  }, [token]);\r\n\r\n  const createNote = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      await axios.post(`${API}/notes`, { title, content }, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      setTitle('');\r\n      setContent('');\r\n      fetchNotes();\r\n      setError('');\r\n    } catch (err) {\r\n      setError(err.response?.data?.error || 'Failed to create note');\r\n      if (err.response?.data?.error?.includes('Note limit')) setLimitReached(true);\r\n    }\r\n  };\r\n\r\n  const deleteNote = async (id) => {\r\n    try {\r\n      await axios.delete(`${API}/notes/${id}`, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      fetchNotes();\r\n      setError('');\r\n    } catch (err) {\r\n      setError('Failed to delete note');\r\n    }\r\n  };\r\n\r\n  const upgrade = async () => {\r\n    try {\r\n      await axios.post(`${API}/tenants/${tenant}/upgrade`, {}, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      setLimitReached(false);\r\n      fetchNotes();\r\n      setError('');\r\n    } catch (err) {\r\n      setError('Upgrade failed');\r\n    }\r\n  };\r\n\r\n  // Edit note handler\r\n  const editNote = async (id, newTitle, newContent) => {\r\n    try {\r\n      await axios.put(`${API}/notes/${id}`, { title: newTitle, content: newContent }, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      fetchNotes();\r\n      setError('');\r\n    } catch (err) {\r\n      setError('Failed to edit note');\r\n    }\r\n  };\r\n\r\n  // Show upgrade banner for both admin and member when limit reached, but only admin sees button\r\n  const showUpgradeBanner = limitReached && (role === 'admin' || role === 'member');\r\n\r\n  if (!token) {\r\n    return <Login onLogin={login} error={error} />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"app-container\">\r\n      <h2>Notes ({tenant})</h2>\r\n      <NoteForm title={title} setTitle={setTitle} content={content} setContent={setContent} onCreate={createNote} disabled={limitReached} />\r\n      {showUpgradeBanner && <UpgradeBanner limitReached={limitReached} role={role} onUpgrade={upgrade} />}\r\n      <NotesList notes={notes} onDelete={deleteNote} onEdit={editNote} />\r\n      {error && <div className=\"error\">{error}</div>}\r\n      <button className=\"logout-btn\" onClick={() => setToken('')}>Logout</button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}